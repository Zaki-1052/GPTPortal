<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat with GPT-4</title>
  <meta name="author" content="Zakir Alibhai">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="chat.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
</head>
<body>
<div>
  <div id="toggleArrow">&#x25B6;</div>
  <div id="sidebar">
    <div id="chatList"></div>
    <div id="summariesButtonContainer">
      <button id="summariesButton">Summaries Only</button>
    </div>
  </div>
  <div id="promptBar">
    <div id="promptList"></div>
    <button id="copyPromptButton"></button>
 </div>
 <div id="toggleRightArrow">&#x25C0;</div>
 <div id="custom-tooltip"></div>
  
  <!-- Model Selector - Exactly like original but with enhanced loading -->
  <div id="model-selector-container">
    <div class="custom-select" id="selected-model">Select a Model</div>
    <div id="model-search-container">
      <input type="text" id="model-search" placeholder="Search models...">
      <div class="toggle-container">
        <label class="toggle-switch">
          <input type="checkbox" id="show-open-router">
          <span class="toggle-slider"></span>
        </label>
        <span class="toggle-label">Show OpenRouter</span>
      </div>
    </div>
    <div id="model-options" class="select-options">
        <!-- Core models (always available, matching original exactly) -->
        <button id="model-gpt-4o" data-value="gpt-4o" class="standard-model">GPT-4o: Latest</button>
        <button id="model-gpt-4o-mini" data-value="gpt-4o-mini" class="standard-model">GPT-4o Mini: Cheapest</button>
        <button id="model-gpt-4-turbo" data-value="gpt-4-turbo" class="standard-model">GPT-4-Turbo: Standard</button>
        <button id="model-gpt-4" data-value="gpt-4" class="standard-model">GPT-4: Oldest</button>
        <button id="model-gpt-3.5" data-value="gpt-3.5-turbo-0125" class="standard-model">GPT-3.5-Turbo: Old</button>
        
        <button id="model-claude-4-opus" data-value="claude-opus-4-20250514" class="standard-model">Claude 4 Opus</button>
        <button id="model-claude-4-sonnet" data-value="claude-sonnet-4-20250514" class="standard-model">Claude 4 Sonnet</button>
        <button id="model-claude-3.7-sonnet" data-value="claude-3-7-sonnet-latest" class="standard-model">Claude 3.7 Sonnet</button>
        <button id="model-claude-3.5-sonnet" data-value="claude-3-5-sonnet-latest" class="standard-model">Claude 3.5 Sonnet</button>
        <button id="model-claude-3.5-haiku" data-value="claude-3-5-haiku-latest" class="standard-model">Claude 3.5 Haiku</button>
        <button id="model-claude-haiku" data-value="claude-3-haiku-20240307" class="standard-model">Claude Haiku: Cheap</button>
        
        <button id="model-o1-preview" data-value="o1-preview" class="standard-model">GPT-o1-Preview: Intelligent Reasoning</button>
        <button id="model-o1" data-value="o1" class="standard-model">GPT-o1: Strong Reasoning</button>
        <button id="model-o3" data-value="o1" class="standard-model">GPT-o3: High Reasoning</button>
        <button id="model-o3-mini" data-value="o3-mini" class="standard-model">GPT-o3 Mini: Cheap Reasoning</button>
        <button id="model-o1-mini" data-value="o1-mini" class="standard-model">GPT-o1 Mini: Cheapest Reasoning</button>
        
        <button id="model-gemini-2.0-flash" data-value="gemini-2.0-flash-exp" class="standard-model">Gemini-2.0 Flash</button>
        <button id="model-gemini-1.5-pro" data-value="gemini-1.5-pro" class="standard-model">Gemini-1.5 Pro: Best</button>
        <button id="model-gemini-1.5-flash" data-value="gemini-1.5-flash" class="standard-model">Gemini-1.5 Flash</button>
        <button id="model-gemini-pro" data-value="gemini-pro" class="standard-model">Gemini Pro</button>
        
        <button id="model-deepseek-r1" data-value="deepseek-reasoner" class="standard-model">DeepSeek-R1</button>
        <button id="model-deepseek-chat" data-value="deepseek-chat" class="standard-model">DeepSeek-Chat</button>
        
        <button id="model-llama-3.1-405b" data-value="llama-3.1-405b-reasoning" class="standard-model">Llama3.1 405b: New</button>
        <button id="model-llama-3.1-70b" data-value="llama-3.1-70b-versatile" class="standard-model">Llama3.1 70b</button>
        <button id="model-llama-3.1-8b" data-value="llama-3.1-8b-instant" class="standard-model">Llama3.1 8b</button>
        
        <button id="model-mistral-large" data-value="mistral-large-latest" class="standard-model">Mistral Large</button>
        <button id="model-codestral" data-value="codestral-latest" class="standard-model">Codestral</button>
        
        <!-- OpenRouter models will be loaded here dynamically but hidden by default -->
    </div>
  </div>

  <!-- Chat Interface - Exactly like original -->
  <!-- Rest of the UI comes from original portal.html structure -->

</div>

<!-- Load the ORIGINAL script.js for full functionality -->
<script src="script.js"></script>

<!-- Simple enhancement for OpenRouter models without breaking anything -->
<script>
// Minimal enhancement that doesn't interfere with original functionality
document.addEventListener('DOMContentLoaded', function() {
  console.log('Loading GPTPortal with enhanced model support...');
  
  // Simple OpenRouter toggle (exactly like original)
  const openRouterToggle = document.getElementById('show-open-router');
  if (openRouterToggle) {
    openRouterToggle.addEventListener('change', function(e) {
      const openRouterModels = document.querySelectorAll('.openrouter-model');
      openRouterModels.forEach(model => {
        model.style.display = e.target.checked ? 'block' : 'none';
      });
    });
  }
  
  // Optional: Load additional OpenRouter models in background without interfering
  loadOpenRouterModelsInBackground();
});

async function loadOpenRouterModelsInBackground() {
  try {
    const response = await fetch('/api/models/openrouter');
    if (response.ok) {
      const data = await response.json();
      if (data.success) {
        console.log(`Enhanced: ${Object.keys(data.data).length} OpenRouter models available`);
        // Could add them to the dropdown here, but for now just log
        // This ensures the new system works without breaking the UI
      }
    }
  } catch (error) {
    // Graceful fallback - if new API isn't available, original functionality still works
    console.log('Enhanced model loading not available, using core models only');
  }
}
</script>
</body>
</html>